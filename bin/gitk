#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "$(readlink -f "$0")")/../scripts" && pwd)"

CMD="$1"
shift

if [ -z "$CMD" ]; then
    echo "Команда не указана. Пример использования: gitk commit"
    exit 1
fi

TARGET="$SCRIPT_DIR/gitk-$CMD"

if [ -f "$TARGET" ]; then
    exec "$TARGET" "$@"
fi

if [[ "$CMD" == "--help" || "$CMD" == "-h" ]]; then
    echo "gitk — оболочка над git с поддержкой кастомных команд"
    echo "Пример: gitk commit, gitk push"
    echo "Доступные команды:"
    ls "$SCRIPT_DIR"/gitk-* 2>/dev/null | sed 's/.*gitk-//' | tr '\n' ' '
    echo
    exit 0
fi

exec git "$CMD" "$@"
